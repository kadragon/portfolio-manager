{% extends "base.html" %}
{% block title %}계좌 — 포트폴리오 매니저{% endblock %}

{% block content %}
<h2 class="page-header">계좌</h2>
<p class="page-subtitle">계좌별 예수금과 보유 내역을 관리합니다.</p>

<section class="section-card">
  <div class="table-wrap">
    <table class="table-compact">
      <thead>
        <tr>
          <th>이름</th>
          <th class="text-right">예수금</th>
          <th>작업</th>
        </tr>
      </thead>
      <tbody id="accounts-body">
        {% for account in accounts %}
          {% include "accounts/_row.html" %}
        {% else %}
        <tr class="empty-row"><td colspan="3">계좌가 없습니다. 아래에서 새 계좌를 추가하세요.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<section class="section-card">
  <h3>계좌 추가</h3>
  <form hx-post="/accounts"
        hx-target="#accounts-body"
        hx-swap="afterbegin"
        hx-on::after-request="this.reset()"
        data-request-message="계좌를 추가하는 중…">
    <div class="form-grid">
      <label class="form-field form-field-wide">
        이름<span class="required-marker" aria-hidden="true">*</span>
        <input type="text" name="name" placeholder="예: KIS 국내 계좌…" required autocomplete="off">
      </label>
      <label class="form-field form-field-mid">
        예수금 (KRW)<span class="required-marker" aria-hidden="true">*</span>
        <input type="number" name="cash_balance" value="0" min="0" step="1" required autocomplete="off">
      </label>
      <div>
        <button type="submit" class="btn btn-primary">계좌 추가</button>
      </div>
    </div>
  </form>
</section>
{% endblock %}
