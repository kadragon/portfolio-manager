{% extends "base.html" %}
{% block title %}{{ group.name }} — Stocks{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ol>
    <li><a href="/groups">Groups</a></li>
    <li>{{ group.name }}</li>
  </ol>
</nav>

<h2>{{ group.name }} — Stocks</h2>

<div style="overflow-x:auto">
  <table>
    <thead>
      <tr>
        <th>Ticker</th>
        <th>Exchange</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="stocks-body">
      {% for stock in stocks %}
        {% include "groups/_stock_row.html" %}
      {% else %}
      <tr><td colspan="3" style="text-align:center">종목이 없습니다. 아래에서 추가하세요.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<h3>New Stock</h3>
<form hx-post="/groups/{{ group.id }}/stocks"
      hx-target="#stocks-body"
      hx-swap="afterbegin"
      hx-on::after-request="this.reset()">
  <div style="display:flex;gap:1rem;align-items:flex-end;flex-wrap:wrap">
    <label style="flex:2;min-width:160px">
      Ticker
      <input type="text" name="ticker" placeholder="e.g. AAPL or 005930" required
             style="text-transform:uppercase">
    </label>
    <div>
      <button type="submit">Add Stock</button>
    </div>
  </div>
</form>
{% endblock %}
