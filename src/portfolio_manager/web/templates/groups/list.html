{% extends "base.html" %}
{% block title %}그룹 — 포트폴리오 매니저{% endblock %}

{% block content %}
<h2 class="page-header">그룹</h2>
<p class="page-subtitle">자산군 목표 비중을 설정하고 종목을 연결합니다.</p>

<section class="section-card">
  <div class="table-wrap">
    <table class="table-compact">
      <thead>
        <tr>
          <th>이름</th>
          <th class="text-right">목표 비중</th>
          <th>작업</th>
        </tr>
      </thead>
      <tbody id="groups-body">
        {% for group in groups %}
          {% include "groups/_row.html" %}
        {% else %}
        <tr class="empty-row"><td colspan="3">그룹이 없습니다. 아래에서 새 그룹을 추가하세요.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<section class="section-card">
  <h3>그룹 추가</h3>
  <form hx-post="/groups"
        hx-target="#groups-body"
        hx-swap="afterbegin"
        hx-on::after-request="this.reset()"
        data-request-message="그룹을 추가하는 중…">
    <div class="form-grid">
      <label class="form-field form-field-wide">
        이름<span class="required-marker" aria-hidden="true">*</span>
        <input type="text" name="name" placeholder="예: 미국 주식…" required autocomplete="off">
      </label>
      <label class="form-field form-field-mid">
        목표 비중 (%)<span class="required-marker" aria-hidden="true">*</span>
        <input type="number" name="target_percentage" value="0" min="0" max="100" step="0.1" required autocomplete="off">
      </label>
      <div>
        <button type="submit" class="btn btn-primary">그룹 추가</button>
      </div>
    </div>
  </form>
</section>
{% endblock %}
