{% extends "base.html" %}
{% block title %}Groups — Portfolio Manager{% endblock %}

{% block content %}
<h2>Groups</h2>

<div style="overflow-x:auto">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th class="text-right">Target %</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="groups-body">
      {% for group in groups %}
        {% include "groups/_row.html" %}
      {% else %}
      <tr><td colspan="3" style="text-align:center">그룹이 없습니다. 아래에서 추가하세요.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<h3>New Group</h3>
<form hx-post="/groups"
      hx-target="#groups-body"
      hx-swap="afterbegin"
      hx-on::after-request="this.reset()">
  <div style="display:flex;gap:1rem;align-items:flex-end;flex-wrap:wrap">
    <label style="flex:2;min-width:160px">
      Name
      <input type="text" name="name" placeholder="e.g. US Equities" required>
    </label>
    <label style="flex:1;min-width:120px">
      Target %
      <input type="number" name="target_percentage" value="0" min="0" max="100" step="0.1">
    </label>
    <div>
      <button type="submit">Add Group</button>
    </div>
  </div>
</form>
{% endblock %}
